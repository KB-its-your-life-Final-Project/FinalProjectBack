<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lighthouse.lawdCode.mapper.AddressMapper">
    <!-- 시/도 목록 조회 (코드만 조회, 이름은 서비스에서 변환) -->
    <select id="selectDistinctSidoWithName" resultType="com.lighthouse.lawdCode.dto.SidoDto">
        SELECT DISTINCT 
            sido_cd as sidoCd,
            sido_cd as sidoNm  -- 임시로 코드를 넣고 서비스에서 변환
        FROM ${API_LAWD_CD}
        WHERE is_deleted = 0
        ORDER BY sido_cd
    </select>

    <!-- 시/군/구 목록 조회 (시/도별) - 원본 데이터 조회, 이름은 서비스에서 변환 -->
    <select id="selectDistinctSggWithNameBySidoCd" parameterType="String" resultType="com.lighthouse.lawdCode.dto.SigugunDto">
        SELECT DISTINCT 
            sgg_cd as sggCd,
            locatadd_nm as sggNm,  -- 원본 주소를 가져와서 서비스에서 변환
            #{sidoCd} as sidoCd
        FROM ${API_LAWD_CD}
        WHERE sido_cd = #{sidoCd} AND is_deleted = 0
        ORDER BY sgg_cd
    </select>

    <!-- 읍/면/동 목록 조회 (시/도별, 시/군/구별) -->
    <select id="selectDistinctDongBySidoCdAndSggCd" parameterType="String" resultType="com.lighthouse.lawdCode.dto.DongDto">
        SELECT DISTINCT umd_cd as umdCd, locallow_nm as dongNm, sgg_cd as sggCd, sido_cd as sidoCd
        FROM ${API_LAWD_CD}
        WHERE sido_cd = #{sidoCd} AND sgg_cd = #{sggCd} AND is_deleted = 0
        ORDER BY umd_cd
    </select>
</mapper>